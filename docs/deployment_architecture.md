# ğŸ—ï¸ Architecture de DÃ©ploiement

Ce document dÃ©crit l'architecture cible des machines virtuelles (VMs) dÃ©ployÃ©es par ce projet d'automatisation.

## ğŸŒ SchÃ©ma de l'Infrastructure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸŒ INTERNET                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ IP: 167.235.118.227
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ¢ SERVEUR HETZNER DÃ‰DIÃ‰                        â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                   ğŸ–¥ï¸  PROXMOX VE                            â”‚ â”‚
â”‚ â”‚              Interface: :8006                               â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚     ğŸŒ‰ vmbr0        â”‚    â”‚        ğŸŒ‰ vmbr1             â”‚ â”‚ â”‚
â”‚ â”‚  â”‚   (RÃ©seau Public)   â”‚    â”‚     (RÃ©seau PrivÃ©)          â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ 167.235.118.224/26  â”‚    â”‚      10.0.1.0/24            â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚             â”‚                         â”‚                     â”‚ â”‚
â”‚ â”‚             â”‚                         â”‚                     â”‚ â”‚
â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                     â”‚ â”‚
â”‚ â”‚   â”‚   ğŸ“  proxy-vm    â”‚               â”‚                     â”‚ â”‚
â”‚ â”‚   â”‚     (ID: 801)     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚ â”‚
â”‚ â”‚   â”‚ 167.235.118.228   â”‚               â”‚                     â”‚ â”‚
â”‚ â”‚   â”‚   (Jump Host)     â”‚               â”‚                     â”‚ â”‚
â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                     â”‚ â”‚
â”‚ â”‚                                       â”‚                     â”‚ â”‚
â”‚ â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚ â”‚                            â”‚    ğŸ“ frontend-vm   â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚      (ID: 802)      â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚     10.0.1.10       â”‚          â”‚ â”‚
â”‚ â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚ â”‚                                       â”‚                     â”‚ â”‚
â”‚ â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚ â”‚                            â”‚    ğŸ“ backend-vm    â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚      (ID: 803)      â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚     10.0.1.20       â”‚          â”‚ â”‚
â”‚ â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚ â”‚                                       â”‚                     â”‚ â”‚
â”‚ â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚ â”‚                            â”‚   ğŸ“ database-vm    â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚      (ID: 804)      â”‚          â”‚ â”‚
â”‚ â”‚                            â”‚     10.0.1.30       â”‚          â”‚ â”‚
â”‚ â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— Flux de Connexion SSH

```
ğŸ–¥ï¸  Ton PC (89.95.52.92)
    â”‚
    â”‚ ssh root@167.235.118.227
    â–¼
ğŸ–¥ï¸  Proxmox (167.235.118.227)
    â”‚
    â”‚ ssh imane@167.235.118.228
    â–¼
ğŸ“ proxy-vm (167.235.118.228) â—„â”€â”€â”€ Jump Host
    â”‚
    â”œâ”€ ssh imane@10.0.1.10 â”€â”€â–º ğŸ“ frontend-vm
    â”œâ”€ ssh imane@10.0.1.20 â”€â”€â–º ğŸ“ backend-vm  
    â””â”€ ssh imane@10.0.1.30 â”€â”€â–º ğŸ“ database-vm
```

## ğŸ“‹ Description des VMs

### ğŸŒ **Proxy VM** (`proxy-vm`)
- **VMID** : 801
- **IP Publique** : 167.235.118.228 (vmbr0)
- **IP PrivÃ©e** : 10.0.1.1 (vmbr1) 
- **RÃ´le** : Jump Host + Reverse Proxy
- **AccÃ¨s** : Directement depuis Internet

### ğŸ¨ **Frontend VM** (`frontend-vm`)
- **VMID** : 802
- **IP** : 10.0.1.10 (vmbr1 uniquement)
- **RÃ´le** : Interface utilisateur (React, Vue, etc.)
- **AccÃ¨s** : Via proxy-vm uniquement

### âš™ï¸ **Backend VM** (`backend-vm`)
- **VMID** : 803
- **IP** : 10.0.1.20 (vmbr1 uniquement)
- **RÃ´le** : API et logique mÃ©tier
- **AccÃ¨s** : Via proxy-vm uniquement

### ğŸ—„ï¸ **Database VM** (`database-vm`)
- **VMID** : 804
- **IP** : 10.0.1.30 (vmbr1 uniquement)
- **RÃ´le** : Base de donnÃ©es (MySQL, PostgreSQL, etc.)
- **AccÃ¨s** : Via proxy-vm uniquement (le plus isolÃ©)

## ğŸ›¡ï¸ SÃ©curitÃ© par Couches

```
Niveau 1: ğŸŒ Pare-feu Hetzner Cloud
    â†“
Niveau 2: ğŸ–¥ï¸ Proxmox (PVE Firewall)
    â†“  
Niveau 3: ğŸ“ proxy-vm (UFW + SSH)
    â†“
Niveau 4: ğŸ”’ RÃ©seau PrivÃ© vmbr1
    â†“
Niveau 5: ğŸ“ VMs Internes (UFW individuel)
```

## ğŸš€ Flux Applicatif (Exemple Web)

```
ğŸ‘¤ Utilisateur
    â”‚ HTTPS
    â–¼
ğŸŒ proxy-vm (Traefik/Nginx)
    â”‚ HTTP interne
    â–¼  
ğŸ¨ frontend-vm (Port 3000)
    â”‚ API REST
    â–¼
âš™ï¸ backend-vm (Port 8000)  
    â”‚ SQL
    â–¼
ğŸ—„ï¸ database-vm (Port 3306/5432)
```

Cette architecture garantit **l'isolation**, **la sÃ©curitÃ©** et **la scalabilitÃ©** de ton infrastructure. 